{% extends "base.html" %}
{% block title %}Browse Hotels | StayIN{% endblock %}
{% block content %}
<div>
  <h2>Explore Hotels</h2>
  <p class="muted">Discover your perfect stay — choose from hotels across locations.</p>

  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;margin-bottom:16px;">
    <input id="hotel-search" class="input" placeholder="Search by name..." style="width:220px;">
    <input id="filter-location" class="input" placeholder="Search by location..." style="width:220px;">
    <button id="filter-search" class="btn">Search</button>
    <select id="sort-select" class="input" style="width:160px;">
      <option value="">Sort by</option>
      <option value="price_low">Price: Low → High</option>
      <option value="price_high">Price: High → Low</option>
      <option value="name_az">Name: A → Z</option>
      <option value="name_za">Name: Z → A</option>
    </select>
    <input id="filter-maxprice" class="input" type="number" placeholder="Max price (₹)" style="width:140px;">
    <button id="filter-reset" class="btn">Reset</button>
  </div>

  <div id="hotel-grid" class="hotel-grid">
    {% for h in hotels %}
      <article class="hotel-card" data-name="{{ h.name|lower }}" data-location="{{ h.location|lower }}" data-minprice="{{ hotel_min[h.id] if hotel_min[h.id] is not none else 999999 }}">
        <a href="{{ url_for('hotel_detail', hotel_id=h.id) }}">
          {% set fallback_img = "https://images.unsplash.com/photo-1501117716987-c8e1ecb210d3?w=1200" %}
          <div class="hotel-img" style="background-image:url('{{ h.image_url if h.image_url else fallback_img }}');"></div>
        </a>
        <div class="hotel-info">
          <h3><a href="{{ url_for('hotel_detail', hotel_id=h.id) }}">{{ h.name }}</a></h3>
          <div class="muted">{{ h.location }}</div>
          <p class="muted" style="margin-top:8px;">{{ (h.description or '')[:120] }}{% if h.description and h.description|length > 120 %}...{% endif %}</p>
          <div class="hotel-footer">
            {% if hotel_min[h.id] %}
              <div class="price">From ₹{{ hotel_min[h.id] }}</div>
            {% else %}
              <div class="price muted">Price not listed</div>
            {% endif %}
            <a href="{{ url_for('hotel_detail', hotel_id=h.id) }}" class="btn">View Details</a>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
</div>
{% endblock %}
